---
import { Icon } from 'astro-icon/components';
import Checklist from './Checklist.astro';

interface Program {
	title: string;
	subtitle?: string;
	description: string;
	icon: string;
	href?: string;
	cta?: {
		text: string;
		href?: string;
		onclick?: string;
		type?: string;
	};
	features: string[];
}

interface Props {
	programs: Program[];
	title?: string;
	description?: string;
	columns?: '1' | '2' | '3';
}

const { programs, title, description, columns = '2' } = Astro.props;

const gridCols = {
	'1': 'grid-cols-1',
	'2': 'grid-cols-1 lg:grid-cols-2',
	'3': 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
};
---

<section class="py-20">
	<div class="container-custom">
		{
			title && (
				<div class="mx-auto mb-16 max-w-4xl text-center">
					<h2 class="mb-6 text-3xl font-bold md:text-4xl">{title}</h2>
					{description && <p class="text-xl text-gray-600">{description}</p>}
				</div>
			)
		}

		<div class={`max-w-7xl mx-auto grid ${gridCols[columns]} gap-10`}>
			{
				programs.map((program, index) => {
					const Element = program.href || program.cta?.href ? 'a' : 'div';
					const linkHref = program.href || program.cta?.href;
					return (
						<Element
							href={linkHref}
							class={`${linkHref ? 'group block' : ''} h-full rounded-2xl border border-gray-100 bg-white p-8 shadow-lg transition-all duration-300 hover:shadow-2xl ${linkHref ? 'group-hover:-translate-y-2' : ''}`}
							style={`animation-delay: ${index * 0.1}s`}
						>
							<div class="mb-6 flex items-start">
								<div
									class={`mr-6 flex h-20 w-20 flex-shrink-0 items-center justify-center rounded-2xl bg-tuhura-green shadow-lg ${linkHref ? 'group-hover:scale-110' : ''} transition-transform`}
								>
									<Icon name={program.icon} class="h-10 w-10 text-white" />
								</div>
								<div>
									<h3
										class={`text-2xl font-bold text-gray-900 ${linkHref ? 'group-hover:text-tuhura-green' : ''} transition-colors`}
									>
										{program.title}
									</h3>
									{program.subtitle && (
										<p class="text-lg font-semibold text-tuhura-green">{program.subtitle}</p>
									)}
								</div>
							</div>
							<p class="mb-6 text-lg leading-relaxed text-gray-700">{program.description}</p>
							<div class="mb-6">
								<h4 class="mb-4 text-lg font-bold text-gray-900">What we offer:</h4>
								<Checklist
									items={program.features.map((feature) => ({ text: feature }))}
									icon="heroicons:check-circle"
									iconColor="text-tuhura-green"
								/>
							</div>
						</Element>
					);
				})
			}
		</div>
	</div>
</section>
